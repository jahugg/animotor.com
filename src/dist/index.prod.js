"use strict";var _homeIcon=_interopRequireDefault(require("./media/home/home-icon.svg"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var n,r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&((n=a?Object.getOwnPropertyDescriptor(e,o):null)&&(n.get||n.set)?Object.defineProperty(r,o,n):r[o]=e[o])}return r.default=e,t&&t.set(e,r),r}var defaultPage="home",pages={home:{title:"Home",slug:"/",module:Promise.resolve().then(function(){return _interopRequireWildcard(require("./modules/home.js"))})},work:{title:"Work",slug:"/work",module:Promise.resolve().then(function(){return _interopRequireWildcard(require("./modules/work.js"))})},info:{title:"Info",slug:"/info",module:Promise.resolve().then(function(){return _interopRequireWildcard(require("./modules/info.js"))})}};function initApp(){buildNavigation(),navigateToCurrentURL(),window.addEventListener("popstate",function(e){var t,n=e.state.slug;for(var r in pages)pages[r].slug===n&&(t=r);buildPage({pageKey:t},!1)})}function navigateToCurrentURL(){var e=window.location.pathname,t=defaultPage;for(var n in pages)pages[n].slug===e&&(t=n);buildPage({pageKey:t},!0)}function buildNavigation(){var e=document.getElementById("app"),t=document.createElement("nav");t.id="nav",e.appendChild(t);var n=document.createElement("ul");for(var r in t.appendChild(n),pages){var a=document.createElement("li");a.setAttribute("data-page",r);var o=document.createElement("a");o.href=pages[r].slug,o.innerHTML="home"===r?'<img src="'+_homeIcon.default+'" alt="'+pages[r].title+'">':pages[r].title,a.appendChild(o),n.appendChild(a),o.addEventListener("click",handlePageLink)}}function buildPage(e,t){var n=e.pageKey,r=document.getElementById("main");r?r.innerHTML="":((r=document.createElement("main")).id="main",app.appendChild(r));var a=pages[n],o="Animotor";e.page!==defaultPage&&(o+=" - "+a.title),document.title=o,t&&window.history.pushState(e,a.title,a.slug),updateNavigation(a.slug),pages[n].module.then(function(e){e.render()}).catch(function(e){console.log(e.message)})}function updateNavigation(e){var t=document.querySelectorAll("nav a"),n=!0,r=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){o.value.removeAttribute("data-active")}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}document.querySelector('a[href="'+e+'"]').setAttribute("data-active","")}function handlePageLink(e){e.preventDefault();var t,n=e.target.closest("a");for(var r in pages)pages[r].slug===n.getAttribute("href")&&(t=r);buildPage({pageKey:t},!0)}initApp();