"use strict";var _homeIcon=_interopRequireDefault(require("./media/home/home-icon.svg"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var n,r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e){Object.prototype.hasOwnProperty.call(e,i)&&((n=a?Object.getOwnPropertyDescriptor(e,i):null)&&(n.get||n.set)?Object.defineProperty(r,i,n):r[i]=e[i])}return r.default=e,t&&t.set(e,r),r}var defaultPage="home",pages={home:{title:"Home",slug:"/",module:Promise.resolve().then(function(){return _interopRequireWildcard(require("./modules/home.js"))})},work:{title:"Work",slug:"/work",module:Promise.resolve().then(function(){return _interopRequireWildcard(require("./modules/work.js"))})},info:{title:"Info",slug:"/info",module:Promise.resolve().then(function(){return _interopRequireWildcard(require("./modules/info.js"))})}};function initApp(){buildNavigation(),navigateToCurrentURL(),window.addEventListener("popstate",function(e){var t,n=e.state.slug;for(var r in pages)pages[r].slug===n&&(t=r);buildPage({pageKey:t},!1)})}function navigateToCurrentURL(){var e=window.location.pathname,t=defaultPage;for(var n in pages)pages[n].slug===e&&(t=n);buildPage({pageKey:t},!0)}function buildNavigation(){var e=document.createElement("nav");e.id="main-nav";var t=document.createElement("ul");for(var n in t.id="main-nav__list",e.appendChild(t),pages){var r=document.createElement("li");r.setAttribute("data-page",n),t.appendChild(r);var a=document.createElement("a");a.href=pages[n].slug,a.addEventListener("click",handlePageLink),r.appendChild(a),a.innerHTML="home"===n?'<img src="'+_homeIcon.default+'" alt="'+pages[n].title+'">':pages[n].title,document.getElementById("app").appendChild(e)}}function buildPage(e,t){var n=e.pageKey,r=document.getElementById("main");r?(r.innerHTML="",document.getElementById("main-nav").classList.remove("fixed")):((r=document.createElement("main")).id="main",app.appendChild(r));var a=pages[n],i="Animotor";e.page!==defaultPage&&(i+=" - "+a.title),document.title=i,t&&window.history.pushState(e,a.title,a.slug),updateNavigation(a.slug),pages[n].module.then(function(e){e.render()}).catch(function(e){console.log(e.message)})}function updateNavigation(e){var t=document.querySelectorAll("#main-nav a"),n=!0,r=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){i.value.removeAttribute("data-active")}}catch(e){r=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}document.querySelector('a[href="'+e+'"]').setAttribute("data-active","")}function handlePageLink(e){e.preventDefault();var t,n=e.target.closest("a");for(var r in pages)pages[r].slug===n.getAttribute("href")&&(t=r);buildPage({pageKey:t},!0)}initApp();