"use strict";var _homeIcon=_interopRequireDefault(require("./media/home/home-icon.svg")),helpers=_interopRequireWildcard(require("./modules/helpers.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var r,a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e){Object.prototype.hasOwnProperty.call(e,i)&&((r=n?Object.getOwnPropertyDescriptor(e,i):null)&&(r.get||r.set)?Object.defineProperty(a,i,r):a[i]=e[i])}return a.default=e,t&&t.set(e,a),a}var defaultPage="home",pages={home:{title:"Home",slug:"/",module:Promise.resolve().then(function(){return _interopRequireWildcard(require("./modules/home.js"))})},work:{title:"Work",slug:"/work",module:Promise.resolve().then(function(){return _interopRequireWildcard(require("./modules/work.js"))})},info:{title:"Info",slug:"/info",module:Promise.resolve().then(function(){return _interopRequireWildcard(require("./modules/info.js"))})}};function initApp(){buildNavigation(),navigateToCurrentURL(),window.addEventListener("popstate",function(e){var t,r=e.state.slug;for(var a in pages)pages[a].slug===r&&(t=a);buildPage({pageKey:t},!1)})}function navigateToCurrentURL(){var e=window.location.pathname,t=defaultPage;for(var r in pages)pages[r].slug===e&&(t=r);buildPage({pageKey:t},!0)}function buildNavigation(){var e=document.createElement("header");e.classList.add("header--relative");var t=document.createElement("nav");t.classList.add("main-nav"),e.appendChild(t);var r=document.createElement("ul");for(var a in r.classList.add("main-nav__list"),t.appendChild(r),pages){var n=document.createElement("li");n.setAttribute("data-page",a),r.appendChild(n);var i=document.createElement("a");i.href=pages[a].slug,i.addEventListener("click",handlePageLink),n.appendChild(i),i.innerHTML="home"===a?'<img src="'+_homeIcon.default+'" alt="'+pages[a].title+'">':pages[a].title}document.getElementById("app").appendChild(e);var o=0;window.addEventListener("scroll",helpers.throttledEvent(function(e){var t=e.target.scrollingElement.scrollTop,r=document.querySelector("header");200<t?o<t&&r.classList.contains("header--fixed-bg")?(r.classList.replace("header--fixed-bg","header--relative"),document.querySelector("main").style.paddingTop=0):t<o&&r.classList.contains("header--relative")&&(r.classList.replace("header--relative","header--fixed-bg"),document.querySelector("main").style.paddingTop=r.offsetHeight+"px"):t<=5&&(r.classList.replace("header--fixed-bg","header--relative"),document.querySelector("main").style.paddingTop=0);o=t},20))}function buildPage(e,t){var r,a=e.pageKey,n=document.getElementById("main");n?(n.innerHTML="",(r=document.querySelector("header")).classList.remove("header--fixed","header--fixed-bg"),r.classList.add("header--relative")):((n=document.createElement("main")).id="main",app.appendChild(n));var i=pages[a],o="Animotor";e.page!==defaultPage&&(o+=" - "+i.title),document.title=o,t&&window.history.pushState(e,i.title,i.slug),updateNavigation(i.slug),pages[a].module.then(function(e){e.render()}).catch(function(e){console.log(e.message)})}function updateNavigation(e){var t=document.querySelectorAll(".main-nav a"),r=!0,a=!1,n=void 0;try{for(var i,o=t[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){i.value.removeAttribute("data-active")}}catch(e){a=!0,n=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw n}}document.querySelector('a[href="'+e+'"]').setAttribute("data-active","")}function handlePageLink(e){e.preventDefault();var t,r=e.target.closest("a");for(var a in pages)pages[a].slug===r.getAttribute("href")&&(t=a);buildPage({pageKey:t},!0)}initApp();