"use strict";require("./styles.less");var _projects=_interopRequireDefault(require("./projects.json")),_=_interopRequireDefault(require("./media/*.*"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function initApp(){var e=_projects.default.projects,t=document.getElementById("app"),i=document.createElement("div");i.classList.add("projects"),t.appendChild(i);var n=document.createElement("div");for(n.classList.add("projects__item"),n.innerHTML=e[0].title,n.setAttribute("data-id",0),i.appendChild(n);i.offsetHeight<window.innerHeight;)addTile("bottom");addTile("top");var r=document.createElement("div");r.classList.add("animation"),r.innerHTML='<video>\n    <source src="'+_.default.huhn.mp4+'" type="video/mp4">\n  </video',t.appendChild(r),window.addEventListener("scroll",throttledEvent(handleTiles,5)),window.addEventListener("scroll",throttledEvent(controlVideo,5))}function throttledEvent(t,i){var n;return function(e){n||(t(e),n=setTimeout(function(){n=null},i))}}function controlVideo(e){var t=document.querySelector(".animation video");t.currentTime+=.01,t.currentTime>=t.duration&&(t.currentTime=0)}function handleTiles(e){var t=document.querySelector(".projects");0===window.pageYOffset?addTile("top"):window.pageYOffset+window.innerHeight===t.offsetHeight&&addTile("bottom")}function addTile(e){var t=_projects.default.projects,i=document.querySelector(".projects"),n=i.offsetHeight,r=document.createElement("div");r.classList.add("projects__item");var o=0;if("top"===e){var d=parseInt(i.firstChild.getAttribute("data-id"),10);o=0===d?t.length-1:d-1,i.prepend(r);var a=i.offsetHeight-n;window.scrollBy(0,a),i.offsetHeight-a>=2*window.innerHeight&&i.lastChild.remove()}else if("bottom"===e){var l=parseInt(i.lastChild.getAttribute("data-id"),10);o=l===t.length-1?0:l+1,i.appendChild(r);var s=i.offsetHeight-n;i.offsetHeight-s>=2*window.innerHeight&&i.firstChild.remove()}r.innerHTML=t[o].title,r.setAttribute("data-id",o)}initApp();